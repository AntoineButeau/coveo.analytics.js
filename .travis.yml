language: node_js
notifications:
  email:
    on_success: never
    on_failure: never
  slack:
    secure: RuHO6QHopumbPdaZ15eK6rUAEBgPmQVV6knhNbvw2b+d6vaq6QqYPiOTJuzkZvVa22RLAa//2tDhPxQZm1BEjjpQZjX3bp5Ao6vH2dsQ2LMaeSgY69G6KHsfAgQicuQKYNBXNx9iKnnWxO5Z713KbNCeDuSqgI0MJiS52NuH3mo=
node_js:
- stable
script:
- npm run lint
- npm run test
- npm run min
- mkdir deploy
- cp coveo.analytics.js deploy/
- cp coveo.analytics.min.js deploy/
deploy:
  provider: s3
  access_key_id: AKIAJ27XTXPEB34RSVEQ
  secret_access_key:
    secure: W7follGE8TO7w0FIM70iUhiSRQinHuotGM+QHSzGylfATP4G7TlTsivFuVAOQx9IS4Sr9nSbRZdcohlu1VAcTmxPUgvz++93rVNhOwmOhIfAxVLgVHREo+gdUEIfOPSOCw9NnTrOU1vad/YcD02LmEubqEUW+Z1wugIZkqoZNKc=
  bucket: testcdn.coveodemo.com
  skip_cleanup: true
  local-dir: deploy
  acl: public_read
  on:
    repo: Coveo/analytics.js
