//* coveo.analytics.js 0.1.2
//* https://github.com/coveo/coveo.analytics.js
//* (c) 2015 Coveo
//* freely distributed under the MIT license
(function(){"use strict";var root=this;var doc=this.document;var _callbackNONCE=Math.floor(Math.random()*1e3)+1;var _getCallbackNONCE=function(){return++_callbackNONCE};var _getJSONP=function(url,params,callback){if(!callback||typeof callback!=="function"){callback=function(){}}var callbackName="coveoua__"+_getCallbackNONCE();root[callbackName]=function(){callback.apply(this,arguments);delete root[callbackName]};params.callback=callbackName;var paramString=[];for(var pkey in params){if(params.hasOwnProperty(pkey)){var val=typeof params[pkey]==="string"?params[pkey]:JSON.stringify(params[pkey]);paramString.push(pkey+"="+encodeURIComponent(val))}}var scr=doc.createElement("script");scr.src=url+"?"+paramString.join("&");doc.body.appendChild(scr)};var _defaultVersion=13;var _defaultEndpoint="https://usageanalytics.coveo.com/rest/v"+_defaultVersion+"/analytics";function CoveoAnalytics(options){if(!(this instanceof CoveoAnalytics)){return new CoveoAnalytics(options)}if(!options){options={}}this.version=options.version||_defaultVersion;this.endpoint=options.endpoint||_defaultEndpoint;this.token=options.token;if(!this.token){console.log("WARNING: CoveoAnalytics -> token not set ")}}CoveoAnalytics.prototype.getStatus=function(callback){var url=this.endpoint+"/status";_getJSONP(url,{},callback)};CoveoAnalytics.prototype.sendSearchEvent=function(data,callback){if(!this.token){return false}var url=this.endpoint+"/search";_getJSONP(url,{searchEvent:data,access_token:this.token},callback)};CoveoAnalytics.prototype.sendSearchEvents=function(data,callback){if(!this.token){return false}var url=this.endpoint+"/searches";_getJSONP(url,{searchEvents:data,access_token:this.token},callback)};CoveoAnalytics.prototype.sendClickEvent=function(data,callback){if(!this.token){return false}var url=this.endpoint+"/click";var eventData={documentUri:data.documentUri,documentUriHash:data.documentUriHash,searchQueryUid:data.searchQueryUid,collectionName:data.collectionName||"default",sourceName:data.sourceName,documentPosition:data.documentPosition,actionCause:data.actionCause,documentTitle:data.documentTitle,documentUrl:data.documentUrl,queryPipeline:data.queryPipeline,actionType:data.actionType,anonymous:data.anonymous,userGroups:data.userGroups,userDisplayName:data.userDisplayName,customData:data.customData||{},device:data.device||navigator.userAgent,mobile:data.mobile,splitTestRunName:data.splitTestRunName,splitTestRunVersion:data.splitTestRunVersion,userAgent:data.userAgent||navigator.userAgent,username:data.username,language:data.language||navigator.language||navigator.userLanguage};_getJSONP(url,{clickEvent:eventData,access_token:this.token},callback)};CoveoAnalytics.prototype.sendCustomEvent=function(data,callback){if(!this.token){return false}var url=this.endpoint+"/custom";var eventData={eventType:data.eventType,eventValue:data.eventValue,lastSearchQueryUid:data.lastSearchQueryUid,anonymous:data.anonymous,userGroups:data.userGroups,userDisplayName:data.userDisplayName,customData:data.customData||{},device:data.device||navigator.userAgent,mobile:data.mobile,splitTestRunName:data.splitTestRunName,splitTestRunVersion:data.splitTestRunVersion,userAgent:data.userAgent||navigator.userAgent,username:data.username,language:data.language||navigator.language||navigator.userLanguage};_getJSONP(url,{customEvent:eventData,access_token:this.token},callback)};if(typeof module!=="undefined"&&module.exports){module.exports=CoveoAnalytics}else{root.Coveo=root.Coveo||{};root.Coveo.UA=CoveoAnalytics}}).call(this);
//# sourceMappingURL=coveo.analytics.min.map