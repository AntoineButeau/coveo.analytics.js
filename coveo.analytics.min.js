(function(){"use strict";var root=this;var doc=this.document;var XHR=root.XMLHttpRequest;var _callbackNONCE=Math.floor(Math.random()*1e3)+1;var _getCallbackNONCE=function(){return++_callbackNONCE};var _getJSONP=function(url,params,callback){if(callback){var callbackName="coveoua__"+_getCallbackNONCE();root[callbackName]=function(){callback.apply(this,arguments);delete root[callbackName]};params.callback=callbackName}var paramString=[];for(var pkey in params){if(params.hasOwnProperty(pkey)){var val=typeof params[pkey]==="string"?params[pkey]:JSON.stringify(params[pkey]);paramString.push(pkey+"="+encodeURIComponent(val))}}var scr=doc.createElement("script");scr.src=url+"?"+paramString.join("&");doc.body.appendChild(scr)};var _defaultVersion=13;var _defaultEndpoint="https://usageanalytics.coveo.com/rest/v"+_defaultVersion+"/analytics";function CoveoAnalytics(options){if(!(this instanceof CoveoAnalytics)){return new CoveoAnalytics(options)}if(!options){options={}}this.version=options.version||_defaultVersion;this.endpoint=options.endpoint||_defaultEndpoint;this.token=options.token;if(!this.token){console.log("WARNING: CoveoAnalytics -> token not set ")}}CoveoAnalytics.prototype.getStatus=function(callback){var url=this.endpoint+"/status";_getJSONP(url,{},callback)};CoveoAnalytics.prototype.sendSearchEvent=function(data,callback){var url=this.endpoint+"/search";_getJSONP(url,{searchEvent:data,access_token:this.token},callback)};CoveoAnalytics.prototype.sendSearchEvents=function(data,callback){var url=this.endpoint+"/searches";_getJSONP(url,{searchEvents:data,access_token:this.token},callback)};CoveoAnalytics.prototype.sendClickEvent=function(data,callback){var url=this.endpoint+"/click";_getJSONP(url,{clickEvent:data,access_token:this.token},callback)};CoveoAnalytics.prototype.sendCustomEvent=function(data,callback){var url=this.endpoint+"/custom";_getJSONP(url,{customEvent:data,access_token:this.token},callback)};CoveoAnalytics.prototype.deleteSession=function(){var url=this.endpoint+"/session";var xhr=new XHR;xhr.onprogress=function(){};xhr.open("DELETE",url,false)};if(typeof module!=="undefined"&&module.exports){module.exports=CoveoAnalytics}else{root.Coveo=root.Coveo||{};root.Coveo.UA=CoveoAnalytics}}).call(this);